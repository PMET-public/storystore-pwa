#import "./_ContactInfo.graphql"
#import "./_ShippingMethods.graphql"
#import "./_SelectedPaymentMethod.graphql"

mutation SetContactInfo($cartId: String = "", $email: String!, $address: CartAddressInput!) {
    cartId @client @export(as: "cartId")

    # Set Email Address
    email: setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {
        cart {
            email
        }
    }

    # Set Billing & Shipping Address
    billingAddress: setBillingAddressOnCart(
        input: {
            cart_id: $cartId
            billing_address: {
                address: $address
                use_for_shipping: true # Use same address for shipping
            }
        }
    ) {
        cart {
            ...ContactInfo
            ...ShippingMethods
            ...SelectedPaymentMethod
        }
    }
}
