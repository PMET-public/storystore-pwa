fragment Cart on Cart {
    id @client
    totalQuantity @client

    ...Prices

    items {
        ... on SimpleCartItem {
            id
            quantity
            ...Product
        }

        ... on ConfigurableCartItem {
            id
            quantity
            ...Product
            ...ConfigurableOptions
        }
    }
}

fragment Prices on Cart {
    prices {
        subTotal: subtotal_excluding_tax {
            currency
            value
        }
        subTotalWithDiscounts: subtotal_with_discount_excluding_tax {
            currency
            value
        }
        taxes: applied_taxes {
            label
            amount {
                currency
                value
            }
        }
        total: grand_total {
            currency
            value
        }
    }
}

fragment Product on CartItemInterface {
    product {
        id
        sku
        name
        thumbnail {
            label
            url
        }
        price {
            regular: regularPrice {
                amount {
                    currency
                    value
                }
            }
        }
    }
}

fragment ConfigurableOptions on ConfigurableCartItem {
    options: configurable_options {
        id
        label: option_label
        value: value_label
    }
}
