fragment Product on ProductInterface {
    sku
    name
    thumbnail {
        label
        url
    }
    price {
        regular: regularPrice {
            amount {
                currency
                value
            }
        }
    }
}

query CartQuery($pageId: Int, $withPage: Boolean!, $cartId: String!) {
    cart(cart_id: $cartId) {
        prices {
            subTotal: subtotal_excluding_tax {
                currency
                value
            }
            subTotalWithDiscounts: subtotal_with_discount_excluding_tax {
                currency
                value
            }
            taxes: applied_taxes {
                label
                amount {
                    currency
                    value
                }
            }
            total: grand_total {
                currency
                value
            }
        }
        items {
            ... on SimpleCartItem {
                id
                quantity
                product {
                    ...Product
                }
            }

            ... on ConfigurableCartItem {
                id
                quantity
                product {
                    ...Product
                }

                options: configurable_options {
                    id
                    label: option_label
                    value: value_label
                }
            }
        }
    }

    page: cmsPage(id: $pageId) @include(if: $withPage) {
        title
        content
        metaDescription: meta_description
        metaKeywords: meta_keywords
        metaTitle: meta_title
    }

    store: storeConfig {
        id
        titlePrefix: title_prefix
        titleSuffix: title_suffix
    }
}
